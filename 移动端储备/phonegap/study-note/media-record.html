<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>media-record</title>
<script language="javascript" src="phonegap-1.3.0.js"></script>
<script language="javascript">
	// 等待加载PhoneGap
	document.addEventListener("deviceready", onDeviceReady, false); 
	
	// 录制音频
	function recordAudio() {
		var src = "myrecording.mp3";
		var mediaRec = new Media(src, onSuccess, onError);
	
		// 开始录制音频
		mediaRec.startRecord();
	
		// 10秒钟后停止录制
		var recTime = 0;
		var recInterval = setInterval(function() {
			recTime = recTime + 1;
			setAudioPosition(recTime + " sec");
			if (recTime >= 10) {
				clearInterval(recInterval);
				mediaRec.stopRecord();
			}
		}, 1000);
	}
	
	// PhoneGap加载完毕 
	function onDeviceReady() {
		recordAudio();
	}
	
	// 创建Media对象成功后调用的回调函数
	function onSuccess() {
		console.log("recordAudio():Audio Success");
	}
	
	// 创建Media对象出错后调用的回调函数
	function onError(error) {
		alert('code: '    + error.code    + '\n' + 
			  'message: ' + error.message + '\n');
	}
	
	// 设置音频播放位置
	function setAudioPosition(position) {
		document.getElementById('audio_position').innerHTML = position;
	}
</script>
</head>

<body>
	<a href="#" class="btn large" onclick="playAudio('http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3');">Play Audio</a>
	<a href="#" class="btn large" onclick="pauseAudio();">Pause Playing Audio</a>
	<a href="#" class="btn large" onclick="stopAudio();">Stop Playing Audio</a>
	<p id="audio_position"></p>
</body>
</html>
