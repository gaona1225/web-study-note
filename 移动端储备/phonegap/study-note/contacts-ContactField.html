<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>contacts-ContactField</title>
<script language="javascript" src="phonegap-1.3.0.js"></script>
<script language="javascript">
	// 等待加载PhoneGap
	document.addEventListener("deviceready", onDeviceReady, false);
	
	// PhoneGap加载完毕
	function onDeviceReady() {
	
		// 建立一个新的联系人记录
		var contact = navigator.service.contacts.create();
	
		//存储联系人电话号码到ContactField[]数组
		var phoneNumbers = [3];
		phoneNumbers[0] = new ContactField('work', '212-555-1234', false);
		phoneNumbers[1] = new ContactField('mobile', '917-555-5432', true);		// 首选项
		phoneNumbers[2] = new ContactField('home', '203-555-7890', false);
		contact.phoneNumbers = phoneNumbers;
	
		// 存储联系人
		contact.save();
	
		// 搜索联系人列表，返回符合条件联系人的显示名及电话号码
		var options = new ContactFindOptions();
		options.filter="";
		filter = ["displayName","phoneNumbers"];
		navigator.service.contacts.find(filter, onSuccess, onError, options);
	}
	
	// onSuccess：返回联系人结果集的快照
	function onSuccess(contacts) {
		for (var i=0; i< contacts.length; i++) {
		// 显示电话号码
			for (var j=0; j< contacts[i].phoneNumbers.length; j++) {
				alert("Type: " + contacts[i].phoneNumbers[j].type + "\n" +
					"Value: "  + contacts[i].phoneNumbers[j].value + "\n" +
					"Preferred: "  + contacts[i].phoneNumbers[j].pref);
			}
		}
	}
	
	// onError: 获取联系人结果集失败
	function onError() {
		alert('onError!');
	}
</script>
</head>

<body>
	<h1>Example</h1>
 	<p>Find Contact</p>
</body>
</html>
