<!DOCTYPE HTML>
<!--<html style="height:100%;" debug="true">-->
<html style="height:100%;">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<title>touchdrag</title>
<script language="javascript" type="text/javascript" src="jquery-1.5.2.min.js"></script>
<!--<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script>-->
<script language="javascript" type="text/javascript" src="touchdrag.js"></script>
<style type="text/css">
	.ulList{
		background:#CCC ;
		height:160px ;
		padding:10px ;
	}
	.ulList li{
		border:1px solid #fff ;
		height:26px ;
		list-style:none ;
		line-height:26px ;
		margin:6px ;
		position:relative ;
		text-align:center ;
		width:120px ;
	}
</style>
<script language="javascript" type="text/javascript">
$(function(){
	var clientX ;
	var clientY ;
	/*var dragX = 'false' ;
	var dragY = 'true' ;*/
	var liH = $('.ulList li').height() ;
	var placehodlLi = '<li class="placehoder"></li>' ;
	var len = $('li').length ;
	for(var i=0;i<len;i++){
		var ulListElem = $('li')[i] ;
		ulListElem.addEventListener("touchstart", touchstart, true);  
		ulListElem.addEventListener("touchmove", touchmove, true); 
		ulListElem.addEventListener("touchend", touchend, true); 
		$('li').eq(i).data('userD',i) ;
	}		
	
	function touchstart(e){
		/*var textMsg = $('li').eq(0).text() ;
		$('.text').text(textMsg) ;*/
	} 
	function touchmove(e){	
		/*if(dragX){
			clientX = e.targetTouches[0].pageX -140 ;
			$('li').eq(index).css('left',clientX) ;
		}
		if(dragY){
			clientY = e.targetTouches[0].pageY + 18 ;
			$('li').eq(index).css('top',clientY) ;
		}*/
		var index = $(this).data('userD') ;	
		clientY = e.targetTouches[0].pageY - (index+1)*32 ;	
		indexNew = parseInt((clientY-50)/liH) ;
		$('li').eq(index).css('top',clientY) ;
	}
	function touchend(e){
		var index = $(this).data('userD') ;	
		var newText = $('li').eq(index).text() ;
		$('li').eq(indexNew).after(placehodlLi) ;
		$('.placehoder').text(newText) ;
		$('.placehoder').css('position','relative') ;
		$('li').eq(index).remove() ;
	} 
	/*function sortLi(obj){
	}*/
}) ;
</script>
</head>

<body>
<ul class="ulList">
	<!--<li>公文管理</li>
	<li>我的流程</li>
	<li>业务工作</li>
	<li>个人事务</li>
	<li>精确执行</li>
	<li>费用管控</li>-->
    <li>111</li>
	<li>222</li>
	<!--<li>333</li>
	<li>444</li>
	<li>555</li>
	<li>666</li>-->
</ul>
text:<span class="text"></span>
</body>
</html>
