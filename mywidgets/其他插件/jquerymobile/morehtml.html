<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title>Pages&Dialogs</title>
<link href="jquery.mobile-1.0/jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-1.5.2.min.js" type="text/javascript"></script>
<script src="jquery.mobile-1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="morehtml.js"></script>
<script language="javascript" type="text/javascript">
$(function(){alert('loadpage') ;
	var userDValue = 'bbbb' ;
	$('a').live('click',function(){
		pageId = $(this).attr('id') ;
		$.get('morehtml.xml',function(data){
			var linkFiles = $(data).find('linkFile') ;			
			for(var i=0; i<linkFiles.length;i++){
				if(pageId == (linkFiles.eq(i).attr('id'))){
					links = linkFiles.eq(i).find('link') ;
					for(var j=0;j<links.length;j++){
						$('head').append('<link href="'+ links.eq(j).text() + '" rel="stylesheet" type="text/css" userD="'+userDValue+'"/>') ;
					}
					scripts = linkFiles.eq(i).find('script') ;
					for(var k=0;k<scripts.length;k++){
						var script = document.createElement('script');
							url = scripts.eq(k).text() ;
							script.type = 'text/javascript';
							script.src = url;
							script.setAttribute('userD',userDValue) ;
						document.getElementsByTagName('head')[0].appendChild(script);
					}
				}
			}
		}) ;
	}) ;	
	$('h4').live('click',function(){
		linkNew = $('link') ;
		scriptNew = $('script') ;
		for(var i=0; i<linkNew.length; i++){
			linkAtr = linkNew.eq(i).attr('userD') ;
			if((linkAtr == userDValue)&&(linkAtr != undefined)){
				linkNew.eq(i).remove() ;
			}
		}
		for(var i=0; i<scriptNew.length; i++){
			scriptAtr = scriptNew.eq(i).attr('userD') ;
			if((scriptAtr == userDValue)&&(scriptAtr != undefined)){
				scriptNew.eq(i).remove() ;
			}
		}
	}) ;
}) ;
</script>

</head>

<body>
<!-- Start of first page: #one -->
<div data-role="page" id="one" data-title="one page">
	<div data-role="header">
		<h1>Multi-page</h1>
	</div><!-- /header -->
    
	<div data-role="content" >	
    	<div data-role="button">btn</div>
    	<a href="morehtmla.html" id="file1" data-role="button" data-transition="flip">morehtmla</a>
        <a href="morehtmlb.html" id="file2" data-role="button" data-transition="flip">morehtmlb</a>
	</div><!-- /content -->	
    
	<div data-role="footer" data-theme="d" data-position="fixed">
		<h4>Page Footer</h4>
	</div><!-- /footer -->
</div><!-- /page one -->
</body>
</html>
