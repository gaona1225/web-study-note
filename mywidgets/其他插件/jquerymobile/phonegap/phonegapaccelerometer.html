<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>phoneGapaccelerometer</title>
<script language="javascript" type="text/javascript" src="phonegap-1.3.0.js"></script>
<script language="javascript" type="text/javascript">
// The watch id references the current `watchAcceleration
var watchID = null ;

//wait for phoneGap to load
document.addEventListener('deviceready',onDeviceready,false) ;

//phoneGap is ready
function onDeviceready(){
	navigator.accelerometer.getCurrentAcceleration(onSuccess,onError) ;
	startWatch() ;
} ;

//onSuccess:get a snapshot of the current accelerometer
function onSuccess(acceleration){
	alert('accelerometer-x:'+accelerometer.x+'<br/>'+'accelerometer-y:'+accelerometer.y+'<br/>'+'accelerometer-z:'+accelerometer.z+'<br/>'+'Timestamp:'+accelerometer.Timestamp) ;
}

//onError:failed to get accelerometer
function onError(){
	alert('failed to get accelerometer') ;
}

// Start watching the acceleration
function startWatch(){
	// Update acceleration every 3 seconds
	var options = {frequency:3000} ;
	watchID = navigator.accelerometer.watchAcceleration(onWatchSuccess,onWatchError,options) ;
}

// Stop watching the acceleration 
function stopWatch(){
	if(watchID){
		navigator.accelerometer.clearWatch(watchID) ;
		watchID = null ;
	}
}

// onWatchSuccess: Get a snapshot of the current acceleration
function onWathchSuccess(accelerometer){
	var elem = document.getElementById('accelerometer') ;
	elem.html = 'accelerometer-x:'+accelerometer.x+'<br/>'+'accelerometer-y:'+accelerometer.y+'<br/>'+'accelerometer-z:'+accelerometer.z+'<br/>'+'Timestamp:'+accelerometer.Timestamp ;
}

// onWatchError: Failed to get the acceleration   
function onWathchError(){
	alert('onWathchError') ;
}
</script>
</head>

<body>
<h1>Example</h1>
<p>getcurrentAccelerometer</p>
<div id="accelerometer">Waiting for accelerometer...</div>
</body>
</html>
