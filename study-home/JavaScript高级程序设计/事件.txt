//获取事件类型
document.getElementById('clickBtn').addEventListener('click',function(event){
	alert('click');
	console.log(event.type);
});

var btn = document.getElementById('clickBtn') ;
btn.onclick = handleEvent ;
btn.onmouseover = handleEvent ;
function handleEvent(event){
	var _type = event.type ;
	if(_type == 'click'){
		console.log('click');
	}else if(_type == 'mouseover'){
		console.log('mouseover');
	}
}

//阻止使用上下文菜单
document.oncontextmenu = function(event){
	event.preventDefault();
}

//跨平台事件
var EventUtil = new Object();

EventUtil.addEventHandler = function(oTarget,sEventType,fnHandler){
	if(oTarget.addEventListener){
		oTarget.addEventListener(sEventType,fnHandler,false);
	}else if(oTarget.attachEvent){
		oTarget.attachEvent('on'+sEventType,fnHandler);
	}else{
		oTarget['on'+sEventType] = fnHandler ;
	}
}

EventUtil.removeEventHandler = function(oTarget,sEventType,fnHandler){
	if(oTarget.removeEventListener){
		oTarget.removeEventListener(sEventType,fnHandler,false);
	}else if(oTarget.detachEvent){
		oTarget.detachEvent('on'+sEventType,fnHandler);
	}else{
		oTarget['on'+sEventType] = null ;
	}
}

function fnHandler(event){
	console.log('addEventHandler');
	EventUtil.removeEventHandler(clickBtn,'click',fnHandler);
}

EventUtil.formatEvent = function(event){
	if(document.all){
		event.charCode = (event.type == 'keypress') ? event.keyCode : 0
		event.eventPhase = 2 ; //值为2表示冒泡阶段
		event.isChar = (event.charCode>0) ; //当charCode不为0时为true
		event.pageX = event.ClientX + document.body.scrollLeft ;
		event.pageY = event.ClientY + document.body.scrollTop ;
		event.preventDefault = function(){
			this.returnvalue = false ;
		}
		
		if(event.type == 'mouseout'){
			event.relatedTarget = event.toElement ;
		}else if(event.type == 'mouseover'){
			event.relatedTarget = event.fromElement ;
		}
		
		event.stopPropagation = function(){
			this.cancelBubble = true ;
		}
		
		event.target = event.srcElement ;
		
		event.timestamp = (new Date()).getTime();
	}
	return event ;
}

EventUtil.getEvent = function(){
	console.log(EventUtil.getEvent.caller.arguments[0]);
	if(window.event){
		return this.formatEvent(window.event) ;
	}else{
		return EventUtil.getEvent.caller.arguments[0];
	}
}

var clickBtn = document.getElementById('clickBtn');
EventUtil.addEventHandler(clickBtn,'click',fnHandler);
clickBtn.onclick = function(){
	var event = EventUtil.getEvent() ;
}


//caller运用
function funcA(){
	console.log('AAA');
	funcB();
}

function funcB(){
	console.log('BBB');
	console.log(funcB.caller);
}
funcA() ;